generator client {
    provider = "prisma-client"
    output   = "../generated/prisma"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model User {
    id       Int     @id @default(autoincrement())
    email    String  @unique
    name     String?
    password String
    quizzes  Quiz[]
}

model Quiz {
    id          Int        @id @default(autoincrement())
    userId      Int        @map("user_id")
    title       String
    description String?
    coverUrl    String?    @map("cover_url")
    createdAt   DateTime   @default(now()) @map("created_at")
    user        User       @relation(fields: [userId], references: [id], onDelete: Cascade)
    questions   Question[]
}

model Question {
    id        Int      @id @default(autoincrement())
    quizId    Int      @map("quiz_id")
    text      String?
    timeLimit Int      @default(2000) @map("time_limit")
    points    Int      @default(1)
    imageUrl  String?  @map("image_url")
    sortOrder Int      @map("sort_order")
    quiz      Quiz     @relation(fields: [quizId], references: [id], onDelete: Cascade)
    options   Option[]
}

model Option {
    id         Int      @id @default(autoincrement())
    questionId Int      @map("question_id")
    text       String?
    isCorrect  Boolean  @default(false) @map("is_correct")
    sortOrder  Int      @map("sort_order")
    question   Question @relation(fields: [questionId], references: [id], onDelete: Cascade)
}
